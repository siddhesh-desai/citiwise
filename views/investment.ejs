<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/css/dashboard.css" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet" />
  

    <link href="a.html" />
    <title>Investment | CitiWise</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      /* Container for the chart */
      .chart-container {
        background-color: #ffffff;
        border-radius: 12px;
        padding: 20px;
        /* max-width: 700px; */
        /* height: 105%; */
        width: 100%;
        /* box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); */
        text-align: center;
        margin-top: 2rem;
        border: 2px solid #c8ff16;
      }

      /* Heading styles */
      .custom-title {
        color: #007bff;
        font-size: 32px;
        margin-bottom: 0;
        margin-top: 0;
      }

      .custom-subtitle {
        color: #333;
        font-size: 24px;
        margin-top: 5px;
        margin-bottom: 20px;
      }

      /* Styling the canvas */
      canvas {
        border: 2px solid #e0e0e0;
        border-radius: 8px;
      }
    </style>

    <style>
      .goal-container {
        width: 210px;
        margin: 19px;
      }
      .goal-text {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        color: #666;
      }
      .goal-text .current-value {
        font-weight: bold;
        color: #333;
      }
      .progress-bar {
        width: 100%;
        height: 8px;
        background-color: #e0e0e0;
        border-radius: 5px;
        overflow: hidden;
        margin-top: 5px;
      }
      .progress-bar-fill {
        height: 100%;
        background-color: #333;
        width: 0;
        border-radius: 5px;
        transition: width 0.3s ease;
      }

      .financial-stats-container {
        display: flex;
        /* gap: 20px; */
        margin-top: 2rem;
        justify-content: space-between;
      }
      .stat-card {
        background-color: #fff;
        border-radius: 8px;
        /* box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); */
        padding: 20px;
        padding-bottom: 0;
        width: 200px;
        text-align: center;
        /* border-color: #c8ff16; */
        border: 2px solid #c8ff16;
      }
      .stat-card h3 {
        margin: 0;
        color: #555;
        font-size: 19px;
      }
      .stat-value {
        font-size: 24px;
        font-weight: bold;
        margin-top: 10px;
      }
      .receivable-value .stat-value {
        color: #4a90e2;
      }
      .payable-value .stat-value {
        color: #d0021b;
      }
      .equity-ratio-value .stat-value {
        color: #7ed321;
      }
      .debt-equity-value .stat-value {
        color: #f5a623;
      }
    </style>

    <style>
      @font-face {
        font-family: pop;
        src: url(./Fonts/Poppins-Medium.ttf);
      }

      .input-container {
        margin-bottom: 20px;
        text-align: left;
      }

      label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
      }

      input {
        padding: 10px;
        width: 300px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 16px;
      }

      .styled-button {
        padding: 10px 20px;
        font-size: 16px;
        color: #fff;
        background-color: #3498db;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        margin-bottom: 1rem;
      }

      .styled-button:hover {
        background-color: #2980b9;
      }

      .mainn {
        color: #c43949;
        width: 97%;
        /* height: 100vh; */
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: pop;
        padding: 3rem;
        padding-bottom: 5rem !important;
        flex-direction: column;
        /* border: 2px solid red; */
        border-radius: 25px;
        padding-bottom: 43px;
        margin-top: 27px;
        margin-bottom: 27px;
        /* padding-top: 1rem; */
        margin-top: 2rem;
        /* background-color: #ff510086; */
        /* box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px; */
        box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
      }

      #progressWala {
        display: flex;
        margin-top: 23px;
      }

      #progressWala li {
        list-style: none;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-right: 35px;
      }

      #progressWala .last {
        margin-right: 33px;
      }

      #progressWala li .icon {
        font-size: 35px;
        color: #ff4732;
        margin: 0 60px;
      }

      #progressWala li .text {
        font-size: 14px;
        font-weight: 600;
        color: #ff4732;
      }

      /* Progress Div Css  */

      ul li .progress {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: rgba(68, 68, 68, 0.781);
        margin: 14px 0;
        display: grid;
        place-items: center;
        color: #fff;
        position: relative;
        cursor: pointer;
      }

      .progress::after {
        content: " ";
        position: absolute;
        width: 125px;
        height: 5px;
        background-color: rgba(68, 68, 68, 0.781);
        right: 30px;
      }

      .one::after {
        width: 0;
        height: 0;
      }

      ul li .progress .uil {
        display: none;
      }

      ul li .progress p {
        font-size: 13px;
      }

      /* Active Css  */

      ul li .active {
        background-color: #ff4732;
        display: grid;
        place-items: center;
      }

      li .active::after {
        background-color: #ff4732;
      }

      ul li .active p {
        display: none;
      }

      ul li .active .uil {
        font-size: 20px;
        display: flex;
      }

      /* ====================== */
      #line-container {
        position: relative;
        width: 100%;
        /* Adjust the width as needed */
        height: 5px;
        margin-top: 4rem;
        /* Adjust the height as needed */
        background-color: #f0f0f0;
        /* Background color of the line */
        display: flex;
        justify-content: space-between;
        bottom: 1rem;
        align-items: center;
      }
      #text-container {
        position: relative;
        width: 100%;
        /* height: 5px; */
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .point {
        /* position: absolute; */
        width: 5px;
        /* Diameter of the circle */
        height: 5px;
        /* background-color: transparent; */
        border-radius: 50%;
        transition: background-color 0.3s ease;
        display: flex;
        justify-content: center;
        color: white;
      }

      .point:nth-child(odd) {
        /* transform: scale(1.5); */
        width: 20px;
        /* Diameter of the circle */
        height: 20px;
        background-color: rgb(223, 222, 222);
      }

      #add-form {
        /* width: 100%; */
        width: 340px;
        margin-top: 1rem;
        box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
        padding: 1rem;
        border-radius: 1rem;
      }

      input {
        padding: 10px;
        width: 100%;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 16px;
      }

      #add-form {
        /* width: 100%; */
        width: 60%;
        margin-top: 1rem;
        box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
        padding: 1rem;
        border-radius: 1rem;
        margin: auto;
        margin-top: 3rem;
        margin-bottom: 1rem;
      }
    </style>
    <style>
      body {
       
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 1200px;
        /* margin: 20px auto; */
        margin-top: 2rem;
        padding: 20px;
        /* background-color: white; */
        border-radius: 8px;
        /* border: 2px solid #c8ff16; */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
      h1,
      h2 {
        color: #007bff;
        margin-bottom: 1rem;
      }
      .summary-cards {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
      }
      .card {
        flex: 1;
        margin-right: 20px;
        padding: 20px;
        /* border: 2px solid #eee; */
        border: 2px solid #c8ff16;
        border-radius: 8px;
        text-align: center;
      }
      .card:last-child {
        margin-right: 0;
      }
      .investments-table {
        width: 100%;
        border-collapse: collapse;
      }
      .investments-table th,
      .investments-table td {
        padding: 10px;
        border: 1px solid #ddd;
        text-align: left;
      }
      .investments-table th {
        background-color: #007bff;
        color: white;
      }
      .action-buttons {
        display: flex;
        justify-content: flex-end;
        margin-top: 20px;
      }
      .action-buttons button {
        padding: 10px 17px;
        /* margin-left: 10px; */
        border: none;
        color: white;
        cursor: pointer;
        border-radius: 4px;
        background-color: #041643;
        font-size: 17px;
        border-radius: 20px !important;
        margin-right: 2rem;
    }
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
      }
      .modal-content {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        max-width: 500px;
        width: 100%;
        text-align: center;
      }
      .close {
        cursor: pointer;
        color: red;
        font-size: 24px;
        float: right;
      }
      .form-group {
        margin-bottom: 15px;
        text-align: left;
      }
      .form-group label {
        display: block;
        margin-bottom: 5px;
      }
      .form-group input {
        width: 100%;
        padding: 10px;
        border-radius: 4px;
        border: 1px solid #ccc;
      }
    </style>
    <style>
      .sidebar--items a, .sidebar--bottom-items a {
        display: flex;
        flex-flow: row;
        align-items: center;
        margin-bottom: 0.4rem;
        font-size: 1.3rem;
        font-weight: 67px;
      
        color: #ffffff;
        padding: 12px;
        border-radius: 23px;
        width: 16rem;
    }

  
  .sidebar--items a:hover, .sidebar--bottom-items a:hover {
    background-color: #cdffcf !important;
    color: #0031b9 !important;
}
  
  .sidebar .logo {
    width: 89%;
    margin-bottom: 5%;
    height: 11%;
    margin-top: 8%;
    border-radius: 1rem;
} 
.expand-card:hover {
  transform: scale(1.02);
  box-shadow: 4px 8px 10px rgba(0, 0, 0, 0.2);
}
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 355px;
  background-color: #041643;
  align-items: center;
  padding: 30px;
  border-top-right-radius: 15px;
  box-shadow: 2px 1px 6px rgb(249, 255, 235);
  display: flex;
  flex-direction: column;
  gap: 2.5 rem;
}
    </style>
  </head>

  <body>

    <section class="main">
      <div class="sidebar">
        <!-- Logo Image -->
    <img src="/img/logo.png" alt="description" class="logo" />

    <!-- Horizantal Rule -->
    <hr style="width: 100%; margin-top:35%" />
      
        <ul class="sidebar--items" style="margin-right: 1rem; margin-top:2rem">
          <li>
            <a href="/">
              <span class="icon icon-1">
                <i class="ri-layout-grid-line"></i>
              </span>
              <span class="sidebar--item">Dashboard</span>
            </a>
          </li>
          <li>
            <a href="/citigpt">
              <span class="icon icon-2"><i class="ri-robot-3-fill"></i></span>
              <span class="sidebar--item">citiGPT</span>
            </a>
          </li>
    
          <li>
            <a href="/family">
              <span class="icon icon-2"><i class="ri-team-fill"></i></span>
              <span class="sidebar--item">My Family</span>
            </a>
          </li>
    
          <li>
            <a href="/investments"  id="active--link">
              <span class="icon icon-4">
                <i class="ri-database-2-fill"></i>
              </span>
              <span class="sidebar--item">My Investments</span>
            </a>
          </li>
    
          <li>
            <a href="/expenses">
              <span class="icon icon-5"><i class="ri-receipt-fill"></i></span>
              <span class="sidebar--item">My Expenses</span>
            </a>
          </li>
    
          <li>
            <a href="/liabilities">
              <span class="icon icon-5">
                <i class="ri-pass-pending-fill"></i></span>
              <span class="sidebar--item">My Liabilities</span>
            </a>
          </li>
    
          <li>
            <a href="/goals">
              <span class="icon icon-5"><i class="ri-focus-2-fill"></i></span>
              <span class="sidebar--item">My Goals</span>
            </a>
          </li>
    
          <li>
            <a href="learnings">
              <span class="icon icon-5"> <i class="ri-book-open-fill"></i></span>
              <span class="sidebar--item">Learning</span>
            </a>
          </li>
        </ul>
        <ul class="sidebar--bottom-items" style="margin-top: 10rem;margin-right:1rem">
          <li>
            <a href="/api/logout">
              <span class="icon icon-8">
                <i class="ri-logout-circle-line"></i>
              </span>
              <span class="sidebar--item" style="margin-right: 5.5rem;">Logout</span>
            </a>
          </li>
        </ul>
      </div>

      <div class="main--content">
        
        <div class="section-name"
        style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background-color: #ffffff; box-shadow: 2px 5px 20px rgba(12, 12, 12, 0.1);margin-top:1rem">

      <div style="font-size: 22px; font-weight: bold; color: #000000; ">
        My Investments
      </div>

      <div style="display: flex; align-items: center;">


        <div style="text-align: right; margin-right: 10px;">
          <div style="font-size: 16px; font-weight: bold; color: #041643;">
            <%=user.name%>
          </div>
          <!-- <div style="font-size: 12px; color: #072777;">
            Family ID: 12345
          </div> -->
          <% if(user.familyId){ %>
            <div style="font-size: 12px; color: #072777;">
              Family ID: <%=user.familyId%>
            </div>
            <% } %>
            
        </div>


        <div
          style="width: 50px; height: 50px; border-radius: 50%; background-color: #000000; display: flex; align-items: center; justify-content: center;">
          <i class="ri-account-circle-fill" style="font-size: 40px; color: #ffffff;"></i>
        </div>

      </div>
    </div>

        <div class="container">
         

          <!-- Summary Section -->
          <!-- <div class="summary-cards">
            <div class="card">
              <h2>Total Invested</h2>
              <p>$<%=totalInvested%></p>
            </div>
            <div class="card">
              <h2>Total Returns</h2>
              <p>$<%=totalReturns%></p>

            </div>
            <% if(nextMaturity) {%>
            <div class="card">
              <h2>Next Maturity</h2>
              <p><%=nextMaturity.toDateString()%></p>
            </div>
            <% } %>
          </div> -->

          <div style="display: flex; justify-content: space-between; padding-left: 15px; padding-right: 15px; ">


            <div style="flex: 1; margin-right: 10px;">
              <div class="expand-card"
                style="background-color:#e8efff; padding: 15px; border-radius: 10px; box-shadow: 2px 4px 3px rgba(0, 0, 0, 0.1); text-align: left;">
                <div style="display: flex; flex-direction: row; align-items: center;justify-content: space-between; ">
                  <div style="font-size: 30px; font-weight: bold; color: #000000;">
                    $<%=totalInvested%>
                  </div>
                  <div style="font-size: 50px; color: #072777; margin-bottom: 0px;">
                    <i class="ri-money-dollar-circle-fill"></i>
                  </div>
                </div>
    
                <div style="font-size: 18px; font-weight: bold; color: #333; margin-bottom: 10px;">
                  Total Balance
                </div>
    
              </div>
            </div>
    
            <div style="flex: 1; margin-right: 10px;">
              <div class="expand-card"
                style="background-color:#e4ffe0; padding: 15px; border-radius: 10px; box-shadow: 2px 4px 3px rgba(0, 0, 0, 0.1); text-align: left;">
                <div style="display: flex; flex-direction: row; align-items: center;justify-content: space-between; ">
                  <div style="font-size: 30px; font-weight: bold; color: #000000;">
                    $<%=totalReturns%>
                  </div>
    
                  <div style="font-size: 50px; color: #072777; margin-bottom: 0px;">
                    <i class="ri-database-2-fill"></i>
                  </div>
    
                </div>
                <div style="font-size: 18px; font-weight: bold; color: #333; margin-bottom: 10px;">
                  Total Investment
                </div>
    
              </div>
            </div>
            <% if(nextMaturity) {%>
            <div style="flex: 1; margin-right: 10px;">
              <div class="expand-card"
                style="background-color:#ffe0e0; padding: 15px; border-radius: 10px; box-shadow: 2px 4px 3px rgba(0, 0, 0, 0.1); text-align: left;">
                <div style="display: flex; flex-direction: row; align-items: center;justify-content: space-between; ">
                  <div style="font-size: 30px; font-weight: bold; color: #000000;">
                    <%=nextMaturity.toDateString()%>
                  </div>
    
                  <div style="font-size: 50px; color: #072777; margin-bottom: 0px;">
                    <i class="ri-calendar-schedule-fill"></i>
                  </div>
    
                </div>
                <div style="font-size: 18px; font-weight: bold; color: #333; margin-bottom: 10px;">
                  Next Maturity   
                </div>
    
              </div>
              <% } %>
            </div>
  
           
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button id="investMoreBtn">Invest More</button>
    </div>

    <!-- Table Starting  -->
    <div style="
    margin: 15px;
    padding: 20px;
    background-color: #ffffff;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    overflow-x: auto;
  ">
 
  <% if(user.investments.length !== 0) { %>
    <table style="
      width: 100%;
      border-collapse: collapse;
      font-family: 'Arial', sans-serif;
      color: #333;
    ">
      <!-- Table Header -->
      <thead>
        <tr style="
          background-color: #f5f7fa;
          text-align: left;
          border-bottom: 2px solid #e0e0e0;
          color: #072777;
        ">
          <th style="padding: 15px 10px;">Investment Type</th>
          <th style="padding: 15px 10px;">Amount</th>
          <th style="padding: 15px 10px;">Invested Date</th>
          <th style="padding: 15px 10px;">Maturity Date</th>
          <th style="padding: 15px 10px;">Status</th>
        </tr>
      </thead>

      <!-- Table Body -->

      <tbody>
        <% for(let i=0; i<user.investments.length; i++) { %>
        <tr style="
          border-bottom: 1px solid #e0e0e0;
          transition: background-color 0.2s;
        " onmouseover="this.style.backgroundColor='#f0f4f8';" onmouseout="this.style.backgroundColor='transparent';">
          <td style="padding: 15px 10px;"><%= user.investments[i].investmentType %></td>
          <td style="padding: 15px 10px;"><%= user.investments[i].amount %></td>
          <td style="padding: 15px 10px;"><%= user.investments[i].investedDate.toDateString() %></td>
          <td style="padding: 15px 10px;"><%= user.investments[i].maturityDate.toDateString() %></td>
          <td style="padding: 15px 10px;">
            <span style="
              background-color: <%= user.investments[i].status === 'Active' ? '#28a745' : '#6c757d' %>; /* Green for Active, Grey for Matured */
              padding: 5px 10px;
              border-radius: 5px;
              color: #fff; /* White text for better contrast */
              font-weight: bold;
            "> 
              <%= user.investments[i].status %> 
            </span>
          </td>
          
        </tr>
        <% } %>
      </tbody>
    </table>
  <% } else { %>
    <p>Currently no Investments!</p>
  <% } %>
</div>

    <!-- Table End  -->

       

         

          <!-- Modal for Invest More -->
          <div id="investMoreModal" class="modal">
            <div class="modal-content">
              <button class="close" id="closeInvestMore" style="border: none;">&times;</button>
              <h2>Invest More</h2>
              <form action="/api/investment" method="post">
                <div class="form-group">
                  <label for="investAmount">Investment Amount:</label>
                  <input
                    type="number"
                    id="investAmount"
                    placeholder="Enter amount"
                    name="amount"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="investType">Investment Type:</label>
                  <input
                    type="text"
                    id="investType"
                    placeholder="Stock, Bond, etc."
                    name="investmentType"
                    required

                  />
                </div>
                <div class="form-group">
                    <label for="maturityDate">Maturity Date:</label>
                    <input
                      type="date"
                      id="maturityDate"
                      placeholder="Select date"
                      name="maturityDate"
                    required

                    />
                  </div>
                  <div class="form-group">
                    <label for="investedDate">Invested Date:</label>
                    <input
                      type="date"
                      id="investedDate"
                      placeholder="Select date"
                      name="investedDate"
                    required

                    />
                  </div>
                <button
                  type="submit"
                  style="
                    background-color: #007bff;
                    color: white;
                    border: none;
                    padding: 10px 20px;
                  "
                >
                  Submit
                </button>
              </form>
            </div>
          </div>

       
        </div>

        <!-- Chart Section -->
        <div class="container">
          <h1 style="font-size: 22px;
    font-weight: bold;
    color: #000000;">Investment Growth Over Time</h1>
          <!-- Line Chart -->
          <canvas id="investmentGrowthChart" style="display: block;
    box-sizing: border-box;
    height: 300px;
    width: 1146px;"></canvas>
        </div>

        <!-- Include Chart.js -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <!-- Script to create the line chart -->
        <script>

            const monthWiseInvestment = <%- JSON.stringify(monthWiseInvestment) %>;
          const ctx = document
            .getElementById("investmentGrowthChart")
            .getContext("2d");
          const investmentGrowthChart = new Chart(ctx, {
            type: "line",
            data: {
              labels: [
                "Jan",
                "Feb",
                "Mar",
                "Apr",
                "May",
                "Jun",
                "Jul",
                "Aug",
                "Sep",
                "Oct",
                "Nov",
                "Dec",
              ], // Months or time series
              datasets: [
                {
                  label: "Investment Growth",
                  data: monthWiseInvestment, // Growth over time
                  backgroundColor: "rgba(0, 123, 255, 0.2)", // Blue area under the curve
                  borderColor: "rgba(0, 123, 255, 1)", // Blue line
                  borderWidth: 2,
                  pointRadius: 4,
                  pointBackgroundColor: "rgba(0, 123, 255, 1)",
                  fill: true,
                  tension: 0.3, // For smooth curve
                },
              ],
            },
            options: {
              scales: {
                x: {
                  title: {
                    display: true,
                    text: "Months",
                  },
                },
                y: {
                  title: {
                    display: true,
                    text: "Investment Amount ($)",
                  },
                  beginAtZero: true,
                },
              },
            },
          });

          // Modal logic
          const investMoreModal = document.getElementById("investMoreModal");
         

          const investMoreBtn = document.getElementById("investMoreBtn");
         

          const closeInvestMore = document.getElementById("closeInvestMore");
         

          // Show invest modal
          investMoreBtn.onclick = function () {
            investMoreModal.style.display = "flex";
          };

         

          // Close modals
          closeInvestMore.onclick = function () {
            investMoreModal.style.display = "none";
          };

          closeWithdraw.onclick = function () {
            withdrawModal.style.display = "none";
          };

          window.onclick = function (event) {
            if (event.target == investMoreModal) {
              investMoreModal.style.display = "none";
            }
            if (event.target == withdrawModal) {
              withdrawModal.style.display = "none";
            }
          };
        </script>

        <br />
        <br />
      </div>
    </section>

   
  </body>
</html>
